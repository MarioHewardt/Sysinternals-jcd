Name:		jcd
Version:	@PROJECT_VERSION_MAJOR@.@PROJECT_VERSION_MINOR@.@PROJECT_VERSION_PATCH@
Release:	@PROJECT_VERSION_TWEAK@%{?dist}
Summary:	Sysinternals jcd (Jump Change Directory)

License:	MIT
URL:		https://github.com/Microsoft/jcd

%description
jcd (Jump Change Directory) is a Sysinternals Rust-based command-line tool that provides enhanced directory
 navigation with substring matching and smart selection. It's like the cd command, but with superpowers!

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT/%{_bindir}
cp jcd $RPM_BUILD_ROOT/%{_bindir}
cp jcd_function.sh $RPM_BUILD_ROOT/%{_bindir}

%clean
rm -rf $RPM_BUILD_ROOT

%post
echo "jcd was installed successfully!"
if [ -t 0 ]; then
	printf '\nWould you like to source /usr/bin/jcd_function.sh now? [y/N] '
	if read -r choice; then
		case "$choice" in
			[Yy]* )
				if [ -r /usr/bin/jcd_function.sh ]; then
					. /usr/bin/jcd_function.sh
					echo "The jcd functions are now available in this shell."
				else
					echo "Couldn't source /usr/bin/jcd_function.sh because the file was not found."
				fi
				;;
			* )
				echo "Skipping sourcing /usr/bin/jcd_function.sh."
				;;
		esac
	fi
else
	echo "To enable jcd in your shell, source the jcd_function.sh file:"
	echo "   source /usr/bin/jcd_function.sh"
fi

%files
%{_bindir}/jcd
%{_bindir}/jcd_function.sh