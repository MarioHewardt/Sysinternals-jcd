parameters:
- name: srcPath
  type: string
  default: '.'
- name: runStaticAnalysis
  type: boolean
  default: False
- name: builddir
  type: string
  default: 'jcd_build'
- name: ldpath
  type: string
  default: ''  

steps:
- script: |
    if [ -n "${{ parameters.ldpath }}" ]; then
        export LD_LIBRARY_PATH="${{ parameters.ldpath }}:$LD_LIBRARY_PATH"
    fi
        
    cd ${{ parameters.srcPath }}
    cargo build --release
  displayName: "Build jcd"
